<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
   	<title>Record Audio</title>    
   	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
   	<link href="http://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css"/>
   	<link href="css/main.css" rel="stylesheet" type="text/css"/>
   	<link href="css/commentScript.css" rel="stylesheet" type="text/css"/>
   	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
   	<script src="js/app.js" type="text/javascript"></script>
   	<script src="js/commentScript.js" type="text/javascript"></script>
</head>
<body>
	<div class="content">
		<h1 class="title row col-md-12"><i class="regular fa fa-pencil-square-o" aria-hidden="true"></i> View and Edit</h1>
		<!-- <a href="#"><div id="close" class="row col-md-12"><i class="regular fa fa-window-close-o" aria-hidden="true"></i></div></a> -->

		<div id="view" class="row col-md-24">
			
			<table align="center">
			    <tbody class='scrollable' align="center">
			        <tr class='selectable'>
			            <td><div class="actor">Juliet:</div></td>
			            <td colspan=3><div class="line">O Romeo, Romeo! wherefore art thou Romeo?</div></td>
			            <td><button class="button disabled fa fa-volume-up"  id="record-1" aria-hidden="true" width=''></button>
			            <button class="button comment-btn disabled fa fa-comment" id="cmt-1" aria-hidden="true"></button></td>
			        </tr>

			        <tr class='selectable'>
						<td><div class="actor">Romeo:</div></td>
			            <td colspan=3><div class="line">Shall I hear more, or shall I speak at this?</div></td>
			            <td><button class="button record-btn disabled fa fa-microphone" id="record-2" aria-hidden="true"></button>
			            <button class="button comment-btn disabled fa fa-comment"  id="cmt-2" aria-hidden="true" width=''></button></td>
			        </tr>

			        <tr class='selectable'>
			            <td><div class="actor">Juliet:</div></td>
			            <td colspan=3><div class="line">'Tis but thy name that is my enemy.</div></td>
			            <td><button class="button disabled fa fa-volume-up" id="record-3" aria-hidden="true"></button>
			            <button class="button comment-btn disabled fa fa-comment" id="cmt-3" aria-hidden="true"></button></td>
			        </tr>

			        <tr class='selectable'>
						<td><div class="actor">Romeo:</div></td>
			            <td colspan=3><div class="line">I take thee at thy word: Call me but love, and I'll be new baptized;</div></td>
			            <td><button class="button record-btn disabled fa fa-microphone" id="record-4" aria-hidden="true"></button>
			            <button class="button comment-btn disabled fa fa-comment"  id="cmt-4" aria-hidden="true" width=''></button></td>
			        </tr>

			        <tr class='selectable'>
			            <td><div class="actor">Juliet:</div></td>
			            <td colspan=3><div class="line">What man art thou that thus bescreen'd in night</div></td>
			            <td><button class="button disabled fa fa-volume-up" id="record-5" aria-hidden="true"></button></i>
			            <button class="button comment-btn disabled fa fa-comment" id="cmt-5" aria-hidden="true"></button></td>
			        </tr>

			        <tr class='selectable'>
						<td><div class="actor">Romeo:</div></td>
			            <td colspan=3><div class="line">By a name
						I know not how to tell thee who I am</div></td>
			            <td><button class="button record-btn disabled fa fa-microphone" id="record-6" aria-hidden="true"></button>
			            <button class="button comment-btn disabled fa fa-comment"  id="cmt-6" aria-hidden="true" width=''></td>
			        </tr>

			        <tr class='selectable'>
			            <td><div class="actor">Juliet:</div></td>
			            <td colspan=3><div class="line">My ears have not yet drunk a hundred words</div></td>
			            <td><button class="button disabled fa fa-volume-up" id="record-7" aria-hidden="true"></button></i>
			            <button class="button comment-btn disabled fa fa-comment" id="cmt-7" aria-hidden="true"></button></td>
			        </tr>

			    </tbody>
			</table>
		</div>
	</div>
<!-- 
	<div>
		<input type="button" id="exit" value="Rehearse" style="display: block; margin: 0 auto;"></input>  
	</div> -->

	<div class="actions" align="center">
		<div class="rehearse">Rehease script</div>
	</div>

<!-- 	<div id="progress">
  		<div id="bar"></div>
	</div> -->

	<dialog class="window_container" id="window">  
	  <p><textarea id="text" rows="5" cols="40" onclick="this.focus();this.select()"></textarea></p>
	    <input type="button" id="exit" value="Close" style="display: block; margin: 0 auto;"></input>  
	</dialog>  


<script>

var SELECTED;

(function() {  
    var dialog = document.getElementById('window');  

    // pop up the textarea, fill with previous comment
    $('.comment-btn').click(function() {
    	SELECTED = $(this);
    	comment_id = SELECTED[0].id;
    	previous_comment = comments[comment_id]
    	// console.log('looking up: ', comment_id, 'previous comment:', previous_comment)
    	$('textarea').val(previous_comment)
        dialog.show(); 
    })

    // close the textarea, update the comments dict
    document.getElementById('exit').onclick = function() {  
    	// get text input
    	input = $('textarea')[0].value
    	// update stored comments
    	comments[SELECTED[0].id] = input;
    	// enable button if there's a comment
    	if (input.length > 0) {
	    	SELECTED.removeClass('disabled');
	    	SELECTED.addClass('regular')
    	} else {
	    	SELECTED.addClass('disabled');
	    	SELECTED.removeClass('regular')
	    }
        dialog.close();  
    };  
})(); 

$('.rehearse').click(function() {
	window.location.href = "rehearseScript1.html";
});

$('.record-btn').click(function() {
	window.location.href = "recordAudio.html";
});

$(".actions div").hover(
	function() {
		$(this).css("border", "2px solid " + themeColors.regular);
	},
	function() {
		$(this).css("border", "none");
	}
);

$(".selectable").hover(
	function() {
		$(this).css("border", "2px solid " + themeColors.regular);
	},
	function() {
		$(this).css("border", "none");
	}
);

$(".selectable").click(function() {
	$('.selectable').each(function() {
		$(this).css('background-color', '#FFF')
	})
		// $(this).css("border", "2px solid " + themeColors.regular);
		$(this).css("background-color", themeColors.highlighted);
});
	// function() {
		// $(this).css("border", "none");
		// $(this).css("background-color", "#FFF");
	// }
// );

// initialize empty comments
var comments = {}
$('.comment-btn').each(function() {
	console.log('adding comment')
	comments[$(this)[0].id] = '';
})

// $('#menu > ul > li').click(function() {
//     if (selected!=null){
//         $(selected).css("background-color", "#FFF");
//     }
//     selected = this;
//     $(this).css("background-color", themeColors.highlighted);
// });

// artificially add a comment for startup
comments['cmt-2'] = 'Make sure to enunciate this section!'
var button = document.getElementById('cmt-2')
$(button).removeClass('disabled')
$(button).addClass('regular')

</script>

</body>
</html>

